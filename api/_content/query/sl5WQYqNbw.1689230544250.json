{"_path":"/questmachine","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Qeust Machine","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"qeust-machine"},"children":[{"type":"text","value":"Qeust Machine"}]},{"type":"element","tag":"h2","props":{"id":"セットアップ"},"children":[{"type":"text","value":"セットアップ"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"QuestMachineプレハブを設置"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"QuestMachine > Quest Databaseをアタッチ"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"クエスト設定方法"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"プレイヤーへ"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"QuestJournal"}]},{"type":"text","value":"をアタッチ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Quest Journal UI へ MessageEventsをアタッチ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"MessageEvents > Snederへ"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"PausePlayer / UnPausePlayer"}]},{"type":"text","value":"イベントを設定"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"UIPanel > OnOpen: QuestJournalUI.MessageEvents.SendToMessageSystem(0) / OnClose: QuestJournalUI.MessageEvents.SendToMessageSystem(1)"}]}]},{"type":"element","tag":"h2","props":{"id":"クエスト設定方法"},"children":[{"type":"text","value":"クエスト設定方法"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ID / Titleを入力"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"State毎にアクションを設定"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Dialogue Text: QuestMachineの依頼ダイアログで表示される"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Dialogue Systemと合わせるなら不要"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Journal Text: クエストジャーナル（メニュー）で表示される"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"クエスト詳細が表示されるため、要設定"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"HUD Text: 画面上に表示されるクエスト名等を表示する"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Conditions"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"次ノードの遷移条件を設定する"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"SendMessage: TalkToNPC）←どこかでTalkToNPCがSendMessageされれば移行する"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"クエスト発行者の設定"},"children":[{"type":"text","value":"クエスト発行者の設定"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"発行者オブジェクト > "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"QuestGiver"}]},{"type":"text","value":"をアタッチ"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Questsに発行予定クエストを設定"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"クエスト状態変更時に任意のイベントを実行する"},"children":[{"type":"text","value":"クエスト状態変更時に任意のイベントを実行する"}]},{"type":"element","tag":"code","props":{"code":"[SerializeField]\r\nprivate StringField questActivate;\r\n[SerializeField]\r\nprivate StringField questFinished;\r\n\r\n// Start is called before the first frame update\r\nvoid Start()\r\n{\r\n    // MessageSystemに特定のメッセージを登録する\r\n    MessageSystem.AddListener(this, questActivate.value, string.Empty);\r\n    MessageSystem.AddListener(this, questFinished.value, string.Empty);\r\n}\r\n\r\n// メッセージが発行された際に呼び出される\r\npublic void OnMessage(MessageArgs args)\r\n  {\r\n      if (args.message.Equals(questActivate.value))\r\n      {\r\n          DirectActivateQuest(questId: args.parameter, args.message);\r\n      }\r\n      else if (args.message.Equals(nextQuest.value))\r\n      {\r\n          // クエスト更新時の処理\r\n      }\r\n      else if (args.message.Equals(questFinished.value))\r\n      {\r\n          DirectFinishedQuest(questId: args.parameter, args.message);\r\n      }\r\n  }\n","filename":"HUD.cs","language":"cs","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"SerializeField"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"StringField"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"questActivate"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"SerializeField"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"StringField"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"questFinished"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-53d40a"},"children":[{"type":"text","value":"// Start is called before the first frame update\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"Start"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-53d40a"},"children":[{"type":"text","value":"// MessageSystemに特定のメッセージを登録する\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"    MessageSystem."}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"AddListener"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":", questActivate.value, string.Empty);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"    MessageSystem."}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"AddListener"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":", questFinished.value, string.Empty);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-53d40a"},"children":[{"type":"text","value":"// メッセージが発行された際に呼び出される\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"OnMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"MessageArgs"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"  {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" (args.message."}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"Equals"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"(questActivate.value))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"DirectActivateQuest"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"questId"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":": args.parameter, args.message);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" (args.message."}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"Equals"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"(nextQuest.value))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-53d40a"},"children":[{"type":"text","value":"// クエスト更新時の処理\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5f542"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":" (args.message."}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"Equals"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"(questFinished.value))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-6b6f90"},"children":[{"type":"text","value":"DirectFinishedQuest"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ed8b05"},"children":[{"type":"text","value":"questId"}]},{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":": args.parameter, args.message);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-500d55"},"children":[{"type":"text","value":"  }"}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"クエストオブジェクト > States > 各State > Actions > Messageで↑で指定したメッセージを入力"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sender: Quest Giver or Questerer, Target: Questerer, parameter: クエスト名など"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"journal-uiを任意のuiに組み込む"},"children":[{"type":"text","value":"Journal UIを任意のUIに組み込む"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"QuestMachineプレハブ > QuestMachineConfigration > Hide Journal UI On Startのチェックを解除"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Quest Journal UIを任意のCanvasへ移動させる"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Animatorは削除"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"UIPanelのShow Animation Trigger / Hide Animation Triggerの中身を削除"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Start StateをOpenへ設定"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Deactivate On Hiddenを解除"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"QuestJournal > Journal UI へ↑のUIを割り当て"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Journalの内容を更新・開く場合はQuestJournal.ShowJournalUI()を呼び出す"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6b6f90{color:#8250DF}\n.ct-53d40a{color:#6E7781}\n.ct-f5f542{color:#CF222E}\n.ct-ed8b05{color:#953800}\n.ct-500d55{color:#24292F}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"セットアップ","depth":2,"text":"セットアップ"},{"id":"クエスト設定方法","depth":2,"text":"クエスト設定方法"},{"id":"クエスト発行者の設定","depth":2,"text":"クエスト発行者の設定"},{"id":"クエスト状態変更時に任意のイベントを実行する","depth":2,"text":"クエスト状態変更時に任意のイベントを実行する"},{"id":"journal-uiを任意のuiに組み込む","depth":2,"text":"Journal UIを任意のUIに組み込む"}]}},"_type":"markdown","_id":"content:questmachine:index.md","_source":"content","_file":"questmachine/index.md","_extension":"md"}